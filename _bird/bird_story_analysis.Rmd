---
title: "bird_story_analysis"
author: "Charlotte Bolch"
date: "3/11/2020"
output: 
  slidy_presentation:
    font_adjustment: -1
    footer: "Copyright 2019 University of Florida Research Foundation, Inc. All Rights Reserved."
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Learning Objectives
1. Students will be able to create visualizations to look at the relationship among the variables of species richness, elevation, and habitat types. 
2. Students will be able to interpret and assess a model predicting species richness.

## Panels 1-11
### Note that Panel 7 will not be a data learning event, it will be after Panel 11

## Data Learning Event (After Panel 11)
After talking with the birds, StatCat and DataDog have learned that the research questions that they birds and cats are interested in are:

### Research Questions

1. What is the relationship between species richness and habitat types (forest, shrubs, trees, etc.)?
2. What is the relationship between species richness and elevation for all bird communities?
3. How can species richness be predicted by elevation within forest habitat?

StatCat and DataDog are on their way to start locating data from random locations using their GPS systems in order to answer those questions. The setup of the data collection form is important to plan out before StatCat and DataDog start collecting data. This way StatCat and DataDog both collect and record all the information that is needed from each location. The information that needs to be collected from each location is:
1. Site
2. Block
3. Elevation
4. Richness
5. Habitat type
Other variables needed?
**An example of a data collection form is here...**

## Panels 12-17

## Data Learning Event (Panel 18)

Before Statcat goes out into the field to collect the data, he would like to look at the data that has already been collected by the cats. Statcat has the data provided to him and he is interested in looking at the different habitat types. He first needs to load the relevant packages and read the data into R. 

### Environment setup and loading datasets  

```{r data setup, warning=FALSE, message=FALSE}

# Load packages (make sure all packages are installed first)
library(dplyr) #coding structure function
library(NCStats) #Subset function
library(vegan) #Ordinations
library(car) #Scatterplot function

setwd("C:/stories/_bird")

# Read in data set collected from DataDog
cat_species_df <- read.csv("../data/cat_species_rich.csv")

```

### Habitat type bar graph
To look at all of the different habitat types, we will create a bar graph. Remember that we need to make sure that the habitat variable is understood in R to be a factor (variable with categories). 

```{r habitat bar graph, warning=FALSE, message=FALSE}

#factor levels for habitat variable
cat_species_df$habitat <- factor(cat_species_df$habitat,levels=c("forest","shrubs","fragment","tree","fence","pasture"))

barplot(datadog_df$habitat,
        main = "Counts of Habitat Types",
        xlab = "Habitat Types",
        ylab = "Count")

```

**Questions:** What is the story that is going on in this bar graph?

## Panels 19-24

## Data Learning Event (Panel 25)

Using the data from the cats, let's look at species richness by habitat type (research question 1) to see if what the birds and DataDog are talking about is correct. Does the habitat type of forest have the most species richness based on our data?

```{r richness boxplot, warning=FALSE, message=FALSE}

#variable = rich for species richness

#boxplot of rich by habitat
boxplot(rich ~ habitat, data=datadog_df,
        main = "Species Richness by Habitat Type",
        xlab = "Habitat Type",
        ylab = "Species Richness")

```

When looking at a boxplot, remember that the solid black line is the the median value, the box indicates the values for the first and third quartiles, and the whiskers with the dotted lines indicate the minimum and maximum values. 

**Question:** What is the story that is going on in this set of boxplots?

**Alert!** Statcat has just uploaded the data that he has collected out in the field to the shared drive. Let's take a look at his data to investigate the relationship between species richness and elevation among all habitat types (research question 2).

**Student exercise: Boxplot with Statcat data**

(1) Create a bar graph 
```{r bar graph student exercise, warning=FALSE, message=FALSE}

```

**Question:** What is the story that is going on in this bar graph? 

(2) Create a boxplot for elevation by habitat.
```{r boxplot student exercise, warning=FALSE, message=FALSE}

boxplot(elevation ~ habitat, data=datadog_df,
        main = "Elevation by Habitat Type",
        xlab = "Habitat Type",
        ylab = "Elevation")

```

**Question:** What is the story that is going on in this boxplot? 

## Panels 26-35

## Data Learning Event (Panel 36)

StatCat and DataDog are interested in looking at the relationship between species richness and elevation specifically within the forest habitat community (research question 3). 

They first create a subset of the data from the cats for only habitat types that are "forest". Then, they create a scatterplot of richness by elevation. 

# Richness with forest bird communities graph
```{r richness forest scatterplot, warning=FALSE, message=FALSE}

forest <- Subset(all,habitat=="forest") #creating a subset of forest habitat only

scatterplot(rich ~ elevation, data=forest, smooth=F,
            main = "",
            xlab = "",
            ylab = "")

```

StatCat and DataDog see that richness decreases with elevation for forest bird communities

Next, StatCat and DataDog construct a simple linear regression model to understand the relationship of elevation in predicting species richness for forest habitats. 

# Model: Richness and elevation for forest bird communities
```{r richness and elevation model, warning=FALSE, message=FALSE}

mod.elev <- lm(rich~elevation,data=forest)
summary(mod.elev)

```

## **Final student exercise?**

## Panels 37-40
### story ends


